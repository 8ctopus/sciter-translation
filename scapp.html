<html
    window-resizable="true"
    window-width="800dip"
    window-height="600dip"
>
<head>
<title>sciter translation demo</title>
<style>

@import url(vendor/8ctopus/sciter-logger/src/logger.css);

body > iframe {
    margin: 0;

    vertical-align: middle;
    text-align: center;
}

header {
    width: *;
    height: max-content;

    padding: 8dip;

    flow: horizontal;

    background: rgb(230,230,230);
}

header > button {
    margin: 0 *;
}

iframe {
    size: *;
}

</style>
<script type="module">

// import functions from sciter libraries
import * as sys from "@sys";
import {encode,decode} from "@sciter";

import {logger} from "vendor/8ctopus/sciter-logger/src/logger.js";
import * as utils from "vendor/8ctopus/sciter-utils/src/utils.js";

document.on("ready", function(event, element) {
    // skip document ready from iframe
    if (element.parentElement)
        return;

    // initialize logger
    logger.init("", false);

    // subscribe to logger messages
    logger.subscribe(function(level, message) {
        const log = document.$("plaintext#logger");

        log.append(JSX(level, {}, [message]));

        // scroll to last item
        log.lastElementChild.scrollIntoView({behavior: "smooth"});
    });

    // attach logger to console
    logger.attach();

    // capture unhandled exceptions
    logger.capture();

    // add support for F5 reload
    utils.addReloadWindow();

    // center window on screen
    utils.centerWindow();

    // list current directory
    const list = sys.fs.$readdir(".");

    let files = [];

    // iterate directory contents
    for (let file of list) {
        // ignore directories
        if (file.type !== 1)
            continue;

        // keep only grid*.html files
        if (file.name.startsWith("translate") && file.name.endsWith(".html")) {
            file = file.name.replace("translate-", "");
            file = file.replace(".html", "");
            files.push(file);
        }
    }

    // get element to append buttons
    const parent = document.$("header");

    // loop through files
    files.forEach(function (file) {
        // create button
        const button = "<button>" + file + "</button>";

        // add button to ui
        parent.append(button);
    });
});

// set all buttons onclick event
document.on("click", "header > button", function(event, button) {
    // get file name from button
    let file = "translate-" + button.innerHTML + ".html";

    // get element to insert code in
    let include = document.$("iframe");

    // insert code
    include.setAttribute("src", file);
});

</script>
</head>
<header>
    <!-- buttons -->
</header>
<body>
    <iframe src="" />
    <plaintext #logger readonly />
</body>
</html>
